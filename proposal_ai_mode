# File Tinder AI Mode â€” Design Proposal

## The Question

> How would you conceptualize an AI mode that works similar but differently than advanced mode?

## Answer: AI Mode as a "Suggestion-First" Workflow

The core insight is this: **Basic Mode is manual-sequential, Advanced Mode is manual-spatial, and AI Mode should be automatic-confirmational.** Instead of you deciding where each file goes one-by-one, the AI pre-sorts *everything* and you review its work â€” accepting, correcting, or overriding suggestions in bulk.

---

## How It Differs from Basic & Advanced

| Aspect | Basic Mode | Advanced Mode | AI Mode |
|--------|-----------|---------------|---------|
| **Who decides** | You, one file at a time | You, with folder tree visible | AI suggests, you confirm |
| **File order** | Sequential (by filter/sort) | Sequential (by filter/sort) | Grouped by AI category |
| **Primary action** | Swipe: Keep/Delete/Skip | Click folder to assign | Accept/Reject AI suggestion |
| **Mental model** | "What do I do with this file?" | "Which folder does this go to?" | "Did the AI get this right?" |
| **Speed** | ~2-5 seconds per file | ~1-3 seconds per file | ~0.5s per file (bulk confirm) |
| **Best for** | Small folders, simple cleanup | Complex folder structures | Large folders (100+ files), initial sort |

The key difference: **you never start from a blank decision.** Every file already has a suggested action when you see it.

---

## UI Concept

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FILE TINDER â€” AI MODE                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  AI Confidence: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 78% overall  â”‚  [Re-analyze] [Settings âš™]  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Category: "Vacation Photos" (34 files) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Confidence: 92% â”€â”  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  âœ… IMG_2041.jpg  3.2MB  â†’  Images/Vacation     [âœ“ Accept] [âœ— Change]  â”‚  â”‚
â”‚  â”‚  âœ… IMG_2042.jpg  2.8MB  â†’  Images/Vacation     [âœ“ Accept] [âœ— Change]  â”‚  â”‚
â”‚  â”‚  âœ… beach.png     1.1MB  â†’  Images/Vacation     [âœ“ Accept] [âœ— Change]  â”‚  â”‚
â”‚  â”‚  âš ï¸  notes.txt    4KB    â†’  Documents/Travel    [âœ“ Accept] [âœ— Change]  â”‚  â”‚
â”‚  â”‚  ...                                                                    â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  [âœ“ Accept All 34] [âœ— Reject Category] [ğŸ“ Change Destination]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Category: "Work Documents" (18 files) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Confidence: 85% â”€â”  â”‚
â”‚  â”‚  âœ… report_Q3.pdf    1.4MB  â†’  Documents/Work   [âœ“ Accept] [âœ— Change] â”‚  â”‚
â”‚  â”‚  âœ… slides.pptx      8.2MB  â†’  Documents/Work   [âœ“ Accept] [âœ— Change] â”‚  â”‚
â”‚  â”‚  âš ï¸  budget.xlsx     245KB  â†’  Documents/Work   [âœ“ Accept] [âœ— Change] â”‚  â”‚
â”‚  â”‚  ...                                                                    â”‚  â”‚
â”‚  â”‚  [âœ“ Accept All 18] [âœ— Reject Category] [ğŸ“ Change Destination]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Category: "Delete Candidates" (45 files) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Confidence: 71% â”€â”  â”‚
â”‚  â”‚  ğŸ—‘ï¸  .DS_Store       4KB    â†’  DELETE            [âœ“ Accept] [âœ— Keep]   â”‚  â”‚
â”‚  â”‚  ğŸ—‘ï¸  thumbs.db       12KB   â†’  DELETE            [âœ“ Accept] [âœ— Keep]   â”‚  â”‚
â”‚  â”‚  âš ï¸  old_draft.docx  340KB  â†’  DELETE            [âœ“ Accept] [âœ— Keep]   â”‚  â”‚
â”‚  â”‚  ...                                                                    â”‚  â”‚
â”‚  â”‚  [âœ“ Accept All 45] [âœ— Keep All] [ğŸ‘ Review One-by-One]                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€ Unsure (12 files) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Confidence: <50%  â”€â”€â”€â”  â”‚
â”‚  â”‚  â“ random_file.bin   890KB  â†’  ???              [Decide manually]      â”‚  â”‚
â”‚  â”‚  â“ screenshot_3.png  1.2MB  â†’  ???              [Decide manually]      â”‚  â”‚
â”‚  â”‚  ...                                                                    â”‚  â”‚
â”‚  â”‚  [Open in Basic Mode] [Open in Advanced Mode]                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚  Accepted: 52/109  â”‚  Changed: 8  â”‚  Remaining: 49                          â”‚
â”‚                                                                              â”‚
â”‚  [â† Back to Launcher]                              [Execute Accepted âœ“]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### The Flow

1. **Scan & Analyze**: On launch, AI Mode scans all files and runs classification. A progress dialog shows "Analyzing 342 files..." with a progress bar. This takes a few seconds.

2. **Present Grouped Results**: Files appear grouped by AI-determined category, not one-at-a-time. Each category shows a confidence score and suggested destination.

3. **Bulk Accept/Reject**: The user's primary action is "Accept All" on high-confidence categories â€” potentially sorting 50+ files in one click. Low-confidence files get individual attention.

4. **Fallback to Manual**: The "Unsure" category at the bottom contains files the AI couldn't classify confidently. Buttons let you send these to Basic or Advanced mode for manual sorting.

5. **Execute**: Same review & execute flow as Basic/Advanced modes.

---

## How the AI Classification Works (Without External APIs)

The AI mode doesn't need a neural network or cloud API. It uses **rule-based heuristics enhanced with learned patterns** â€” entirely local, entirely offline:

### Tier 1: Metadata Rules (Instant, 100% local)

```
MIME type â†’ Category mapping:
  image/*         â†’ "Images"
  video/*         â†’ "Videos"  
  audio/*         â†’ "Audio"
  text/*, *pdf*, *document*  â†’ "Documents"
  *zip*, *archive*           â†’ "Archives"

Filename pattern rules:
  .DS_Store, Thumbs.db, desktop.ini     â†’ "Delete: System Junk"
  *.tmp, *.bak, ~*                      â†’ "Delete: Temporary Files"
  Screenshot*, Screen Shot*             â†’ "Images/Screenshots"
  IMG_*, DSC_*, DCIM*                   â†’ "Images/Camera"
  *.log                                 â†’ "Delete: Log Files"

Size-based rules:
  0 bytes                               â†’ "Delete: Empty Files"
  Exact duplicate (same name+size)      â†’ "Delete: Duplicates" (reuses existing has_duplicate flag from scan)
```

### Tier 2: Content-Aware Grouping (Local analysis)

```
Date clustering:
  Files modified within the same week â†’ group together
  "January 2024 files", "Last week's downloads"

Name similarity:
  report_v1.docx, report_v2.docx, report_final.docx â†’ "Document Versions"
  IMG_2041.jpg through IMG_2089.jpg â†’ "Photo Series (48 photos)"

Extension grouping:
  All .py files â†’ "Code/Python"
  All .jsx/.tsx files â†’ "Code/React"
```

### Tier 3: Learned Patterns (From user history)

```
Session learning:
  "User previously moved *.pdf from Downloads to Documents/Receipts"
  "User keeps files >10MB, deletes files <1KB in this folder"
  "User always deletes .tmp files"
  
Cross-session patterns:
  Track decision frequency per (extension, size_bucket, source_folder)
  Build a simple decision table over time
```

### Confidence Scoring

```
High (>80%):   MIME-based category + name matches known pattern
Medium (50-80): MIME matches but name is ambiguous
Low (<50%):    Unknown extension, no pattern match, conflicting signals
```

---

## Architecture: How It Fits in the Codebase

### Class Hierarchy

```
StandaloneFileTinderDialog (Basic Mode)
    â””â”€â”€ AdvancedFileTinderDialog (Advanced Mode)
            â””â”€â”€ AiFileTinderDialog (AI Mode)    â† new

FileClassifier           â† new: rule engine that categorizes files
ClassificationResult     â† new: struct holding category + confidence + suggestion
```

AI Mode inherits from `AdvancedFileTinderDialog` because it reuses:
- File scanning (`scan_files()`)
- Session persistence (`save_session_state()` / `load_session_state()`)
- The review & execute pipeline (`show_review_summary()`, `execute_decisions()`)
- Filter/sort infrastructure
- Database manager integration

But it **overrides `setup_ui()`** completely â€” the UI is a scrollable list of category groups, not a swipe card or mind map.

### New Files

```
app/include/AiFileTinderDialog.hpp    â€” AI mode dialog
app/lib/AiFileTinderDialog.cpp        â€” AI mode implementation
app/include/FileClassifier.hpp        â€” Classification engine
app/lib/FileClassifier.cpp            â€” Rule engine + learned patterns
```

### New Database Tables

```sql
-- Learned classification patterns (Tier 3)
CREATE TABLE ai_classification_patterns (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    extension TEXT,                    -- e.g. ".pdf"
    name_pattern TEXT,                 -- e.g. "receipt*"
    size_bucket TEXT,                  -- e.g. "1KB-1MB"
    source_folder_pattern TEXT,        -- e.g. "*/Downloads"
    suggested_decision TEXT NOT NULL,  -- "keep", "delete", "move"
    suggested_destination TEXT,        -- e.g. "Documents/Receipts"
    frequency INTEGER DEFAULT 1,      -- how many times this pattern was confirmed
    last_used DATETIME
);

-- AI session categories (for resuming AI sessions)
CREATE TABLE ai_categories (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_folder TEXT NOT NULL,
    category_name TEXT NOT NULL,
    suggested_destination TEXT,
    confidence REAL,
    accepted INTEGER DEFAULT 0       -- 1 = user accepted this category
);
```

### Integration with Launcher

```cpp
// In main.cpp FileTinderLauncher â€” add a third mode button:

auto* ai_btn = new QPushButton("ğŸ¤– AI Mode");
ai_btn->setToolTip("Let AI suggest how to sort your files, then review and confirm");
connect(ai_btn, &QPushButton::clicked, this, &FileTinderLauncher::launch_ai);

void launch_ai() {
    // Same pattern as launch_basic / launch_advanced
    auto* dlg = new AiFileTinderDialog(chosen_path_, db_manager_, this);
    connect(dlg, &AiFileTinderDialog::switch_to_basic_mode, ...);
    connect(dlg, &AiFileTinderDialog::switch_to_advanced_mode, ...);
    dlg->initialize();
    dlg->exec();
    dlg->deleteLater();
}
```

### Mode Switching

AI Mode can switch to Basic or Advanced for "Unsure" files:

```
AI Mode  â†’  "Open unsure files in Basic Mode"  â†’  Basic Mode (filtered to unsure files only)
AI Mode  â†’  "Open unsure files in Advanced Mode" â†’ Advanced Mode (with AI-suggested folders pre-loaded)
```

---

## What Makes This Different from Advanced Mode

Advanced Mode says: *"Here are your folders. Here's a file. You decide."*

AI Mode says: *"I've already sorted everything. Did I get it right?"*

The mental model flips from **decision-making** to **decision-reviewing**. This is fundamentally faster because:

1. **Saying "yes" is faster than choosing** â€” confirming a suggestion takes ~0.5s, picking from a folder tree takes ~2s
2. **Bulk operations** â€” accepting a whole category at once is not possible in Basic/Advanced
3. **Smart ordering** â€” high-confidence categories appear first, so you blast through easy files quickly and spend time only on genuinely ambiguous ones
4. **Learning** â€” the more you use it, the better it gets. After 3-4 sessions on your Downloads folder, it knows your patterns

### The "Similar But Different" Aspect

- **Similar**: Same file set, same scan, same database, same execute pipeline, same undo, same session persistence
- **Different**: No swiping, no one-at-a-time, no folder tree clicking. The interaction model is *review a pre-computed plan* rather than *build a plan from scratch*

It's the difference between a chef preparing a meal from scratch (Basic/Advanced) versus a meal kit where ingredients are pre-sorted and you just confirm the recipe (AI Mode).

---

## Summary

AI Mode is the third leg of the stool:

- **Basic**: I want to quickly clean up a small folder â†’ *swipe, swipe, swipe*
- **Advanced**: I have a complex folder structure to sort into â†’ *click, click, click*
- **AI**: I have hundreds of files and want it done fast â†’ *accept, accept, accept, fix a few, done*

It reuses the entire existing infrastructure (scanning, persistence, execution, undo) but replaces the *input* model â€” from "tell me what to do with each file" to "here's what I'd do, correct me where I'm wrong."
